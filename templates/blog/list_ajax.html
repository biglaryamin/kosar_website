{% load static %}
{% block main %}
<!-- Page Header -->
<header class="masthead" style="background-image:url('{% static "img/uni2.jpg" %}')">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <div class="site-heading">
                    <h1 style=" font-family:'Sahel'">سامانه اساتید</h1>
                    <h6 style=" font-family:'Sahel'">دانشگاه هوایی شهید ستاری</h6>
                </div>
            </div>
        </div>
    </div>
</header>

<div class="container">
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            <div>
                <p>Click the following button to see the function in action</p>  
                <input type = "button" onclick = "load_posts()" value = "Display">  
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
// Load all posts on page load
function load_posts() {
    $.ajax({
        url : "articles/", // the endpoint
        type : "GET", // http method
        // handle a successful response
        success : function(json) {
            for (var i = 0; i < json.length; i++) {
                console.log(json[i])
                // $("#talk").prepend("<li id='post-"+json[i].id+"'><strong>"+json[i].text+"</strong> - <em> "+json[i].author+"</em> - <span> "+json[i].created+
                // "</span> - <a id='delete-post-"+json[i].id+"'>delete me</a></li>");
            }
        },
        // handle a non-successful response
        error : function(xhr,errmsg,err) {
            // $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            //     " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
            console.log("Nothing to show"); // provide a bit more info about the error to the console
        }
    });
};
</script>

{% endblock %}